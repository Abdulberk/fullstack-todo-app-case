{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nexport const todosApi = createApi({\n  reducerPath: 'todosApi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:5000/',\n    prepareHeaders: headers => {\n      const token = localStorage.getItem('token');\n      if (token) {\n        headers.set('authorization', `Bearer ${token}`);\n      }\n      return headers;\n    }\n  }),\n  endpoints: builder => ({\n    getTodos: builder.query({\n      query: () => 'get-todos'\n    }),\n    deleteTodo: builder.mutation({\n      query: {\n        todoId\n      }\n    }),\n    deleteTask: builder.mutation({\n      query: _ref => {\n        let {\n          todo,\n          taskId\n        } = _ref;\n        return {\n          url: `delete-task/todo/${todo}/task/${taskId}`,\n          method: 'DELETE'\n        };\n      }\n    }),\n    createTodo: builder.mutation({\n      query: newTodo => ({\n        url: 'add-todo',\n        method: 'POST',\n        body: newTodo\n      })\n    }),\n    updateTaskStatus: builder.mutation({\n      query: _ref2 => {\n        let {\n          todo,\n          taskId,\n          completed\n        } = _ref2;\n        return {\n          url: `update-task-status/todo/${todo}/task/${taskId}`,\n          method: 'PUT',\n          body: {\n            completed: completed\n          }\n        };\n      }\n    }),\n    updateTodoTitle: builder.mutation({\n      query: _ref3 => {\n        let {\n          todoId,\n          newTitle\n        } = _ref3;\n        return {\n          url: `update-todo-title/${todoId}`,\n          method: 'PUT',\n          body: {\n            newTitle\n          }\n        };\n      }\n    }),\n    addTask: builder.mutation({\n      query: _ref4 => {\n        let {\n          todoId,\n          newTask\n        } = _ref4;\n        return {\n          url: `add-task/${todoId}`,\n          method: 'PUT',\n          body: {\n            text: newTask.text\n          }\n        };\n      }\n    })\n  })\n});\nexport const {\n  useGetTodosQuery,\n  useCreateTodoMutation,\n  useUpdateTaskStatusMutation,\n  useUpdateTodoTitleMutation,\n  useAddTaskMutation,\n  useDeleteTaskMutation\n} = todosApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","todosApi","reducerPath","baseQuery","baseUrl","prepareHeaders","headers","token","localStorage","getItem","set","endpoints","builder","getTodos","query","deleteTodo","mutation","todoId","deleteTask","_ref","todo","taskId","url","method","createTodo","newTodo","body","updateTaskStatus","_ref2","completed","updateTodoTitle","_ref3","newTitle","addTask","_ref4","newTask","text","useGetTodosQuery","useCreateTodoMutation","useUpdateTaskStatusMutation","useUpdateTodoTitleMutation","useAddTaskMutation","useDeleteTaskMutation"],"sources":["C:/Users/Taha/Desktop/MERN-todo-case-project/frontend/src/api/todosApi.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\nimport { Todo} from '../types/Todo';\r\nimport { Task } from '../types/Task';\r\n\r\nexport const todosApi = createApi({\r\n  reducerPath: 'todosApi',\r\n  baseQuery: fetchBaseQuery({ baseUrl: 'http://localhost:5000/',\r\n    prepareHeaders: (headers) => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            headers.set('authorization', `Bearer ${token}`);\r\n        }\r\n        return headers;\r\n        }\r\n\r\n},\r\n    \r\n  ),\r\n  endpoints: (builder) => ({\r\n    getTodos: builder.query<any, void>({\r\n      query: () => 'get-todos',\r\n\r\n      \r\n    }),\r\n    deleteTodo: builder.mutation<Todo, {todoId:string}>({\r\n        query: ({todoId})\r\n\r\n    }),\r\n\r\n    deleteTask: builder.mutation<Todo, {todo:string, taskId:string}>({\r\n        query: ({todo, taskId}) => ({\r\n            url: `delete-task/todo/${todo}/task/${taskId}`,\r\n            method: 'DELETE',\r\n\r\n\r\n        })\r\n    }),\r\n    createTodo: builder.mutation<Todo, Partial<Todo>>({\r\n      query: (newTodo) => ({\r\n        url: 'add-todo',\r\n        method: 'POST',\r\n        body: newTodo,\r\n      }),\r\n    }),\r\n    updateTaskStatus: builder.mutation<Todo, { todo: string, taskId: string, completed:boolean }>({\r\n      query: ({ todo, taskId, completed }) => ({\r\n        url: `update-task-status/todo/${todo}/task/${taskId}`,\r\n        method: 'PUT',\r\n        body : {completed: completed\r\n        \r\n        }\r\n      }),\r\n    }),\r\n    updateTodoTitle: builder.mutation<Todo, { todoId: string, newTitle: string }>({\r\n      query: ({ todoId, newTitle }) => ({\r\n        url: `update-todo-title/${todoId}`,\r\n        method: 'PUT',\r\n        body: { newTitle }, \r\n      }),\r\n    }),\r\n    addTask: builder.mutation<Todo, { todoId: string, newTask: Task }>({\r\n      query: ({ todoId, newTask }) => ({\r\n        url: `add-task/${todoId}`,\r\n        method: 'PUT',\r\n        body: {\r\n            text: newTask.text\r\n        }\r\n      }),\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const { useGetTodosQuery, useCreateTodoMutation, useUpdateTaskStatusMutation, useUpdateTodoTitleMutation, useAddTaskMutation, useDeleteTaskMutation } = todosApi;\r\n\r\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,cAAc,QAAQ,8BAA8B;AAIxE,OAAO,MAAMC,QAAQ,GAAGF,SAAS,CAAC;EAChCG,WAAW,EAAE,UAAU;EACvBC,SAAS,EAAEH,cAAc,CAAC;IAAEI,OAAO,EAAE,wBAAwB;IAC3DC,cAAc,EAAGC,OAAO,IAAK;MACzB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAC3C,IAAIF,KAAK,EAAE;QACPD,OAAO,CAACI,GAAG,CAAC,eAAe,EAAG,UAASH,KAAM,EAAC,CAAC;MACnD;MACA,OAAOD,OAAO;IACd;EAER,CAEE,CAAC;EACDK,SAAS,EAAGC,OAAO,KAAM;IACvBC,QAAQ,EAAED,OAAO,CAACE,KAAK,CAAY;MACjCA,KAAK,EAAEA,CAAA,KAAM;IAGf,CAAC,CAAC;IACFC,UAAU,EAAEH,OAAO,CAACI,QAAQ,CAAwB;MAChDF,KAAK,EAAG;QAACG;MAAM;IAEnB,CAAC,CAAC;IAEFC,UAAU,EAAEN,OAAO,CAACI,QAAQ,CAAqC;MAC7DF,KAAK,EAAEK,IAAA;QAAA,IAAC;UAACC,IAAI;UAAEC;QAAM,CAAC,GAAAF,IAAA;QAAA,OAAM;UACxBG,GAAG,EAAG,oBAAmBF,IAAK,SAAQC,MAAO,EAAC;UAC9CE,MAAM,EAAE;QAGZ,CAAC;MAAA;IACL,CAAC,CAAC;IACFC,UAAU,EAAEZ,OAAO,CAACI,QAAQ,CAAsB;MAChDF,KAAK,EAAGW,OAAO,KAAM;QACnBH,GAAG,EAAE,UAAU;QACfC,MAAM,EAAE,MAAM;QACdG,IAAI,EAAED;MACR,CAAC;IACH,CAAC,CAAC;IACFE,gBAAgB,EAAEf,OAAO,CAACI,QAAQ,CAA4D;MAC5FF,KAAK,EAAEc,KAAA;QAAA,IAAC;UAAER,IAAI;UAAEC,MAAM;UAAEQ;QAAU,CAAC,GAAAD,KAAA;QAAA,OAAM;UACvCN,GAAG,EAAG,2BAA0BF,IAAK,SAAQC,MAAO,EAAC;UACrDE,MAAM,EAAE,KAAK;UACbG,IAAI,EAAG;YAACG,SAAS,EAAEA;UAEnB;QACF,CAAC;MAAA;IACH,CAAC,CAAC;IACFC,eAAe,EAAElB,OAAO,CAACI,QAAQ,CAA6C;MAC5EF,KAAK,EAAEiB,KAAA;QAAA,IAAC;UAAEd,MAAM;UAAEe;QAAS,CAAC,GAAAD,KAAA;QAAA,OAAM;UAChCT,GAAG,EAAG,qBAAoBL,MAAO,EAAC;UAClCM,MAAM,EAAE,KAAK;UACbG,IAAI,EAAE;YAAEM;UAAS;QACnB,CAAC;MAAA;IACH,CAAC,CAAC;IACFC,OAAO,EAAErB,OAAO,CAACI,QAAQ,CAA0C;MACjEF,KAAK,EAAEoB,KAAA;QAAA,IAAC;UAAEjB,MAAM;UAAEkB;QAAQ,CAAC,GAAAD,KAAA;QAAA,OAAM;UAC/BZ,GAAG,EAAG,YAAWL,MAAO,EAAC;UACzBM,MAAM,EAAE,KAAK;UACbG,IAAI,EAAE;YACFU,IAAI,EAAED,OAAO,CAACC;UAClB;QACF,CAAC;MAAA;IACH,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEC,gBAAgB;EAAEC,qBAAqB;EAAEC,2BAA2B;EAAEC,0BAA0B;EAAEC,kBAAkB;EAAEC;AAAsB,CAAC,GAAGzC,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}