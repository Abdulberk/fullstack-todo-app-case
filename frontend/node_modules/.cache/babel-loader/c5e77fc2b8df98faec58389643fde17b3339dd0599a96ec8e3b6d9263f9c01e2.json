{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nconst baseQuery = fetchBaseQuery({\n  baseUrl: 'http://localhost:5000',\n  prepareHeaders: (headers, _ref) => {\n    var _state$auth;\n    let {\n      getState\n    } = _ref;\n    const state = getState();\n    const token = (_state$auth = state.auth) === null || _state$auth === void 0 ? void 0 : _state$auth.token;\n    if (token) {\n      headers.set('authorization', `Bearer ${token}`);\n    }\n    return headers;\n  }\n});\nexport const authApi = createApi({\n  reducerPath: 'authApi',\n  baseQuery,\n  endpoints: builder => ({\n    loginUser: builder.mutation({\n      query: body => ({\n        url: '/login',\n        method: 'POST',\n        body,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n    })\n  })\n});\nexport const {\n  useLoginUserMutation\n} = authApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","baseQuery","baseUrl","prepareHeaders","headers","_ref","_state$auth","getState","state","token","auth","set","authApi","reducerPath","endpoints","builder","loginUser","mutation","query","body","url","method","useLoginUserMutation"],"sources":["C:/Users/Taha/Desktop/MERN-todo-case-project/frontend/src/api/authApi.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\r\nimport { RootState } from '../redux/store';\r\n\r\nconst baseQuery = fetchBaseQuery({\r\n  baseUrl: 'http://localhost:5000',\r\n  prepareHeaders: (headers, { getState }) => {\r\n    const state = getState() as RootState;\r\n    const token = state.auth?.token;\r\n    if (token) {\r\n      headers.set('authorization', `Bearer ${token}`);\r\n    }\r\n    return headers;\r\n  },\r\n});\r\n\r\nexport interface AuthResponse {\r\n  token: string | null;\r\n  message: string;\r\n}\r\n\r\nexport const authApi = createApi({\r\n  reducerPath: 'authApi',\r\n  baseQuery,\r\n  endpoints: (builder) => ({\r\n    loginUser: builder.mutation<AuthResponse, { email: string; password: string }>({\r\n      query: (body) => ({\r\n        url: '/login',\r\n        method: 'POST',\r\n        body,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n      }),\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const { useLoginUserMutation } = authApi;\r\n"],"mappings":"AAAA,SAASA,SAAS,EAAEC,cAAc,QAAQ,8BAA8B;AAGxE,MAAMC,SAAS,GAAGD,cAAc,CAAC;EAC/BE,OAAO,EAAE,uBAAuB;EAChCC,cAAc,EAAEA,CAACC,OAAO,EAAAC,IAAA,KAAmB;IAAA,IAAAC,WAAA;IAAA,IAAjB;MAAEC;IAAS,CAAC,GAAAF,IAAA;IACpC,MAAMG,KAAK,GAAGD,QAAQ,CAAC,CAAc;IACrC,MAAME,KAAK,IAAAH,WAAA,GAAGE,KAAK,CAACE,IAAI,cAAAJ,WAAA,uBAAVA,WAAA,CAAYG,KAAK;IAC/B,IAAIA,KAAK,EAAE;MACTL,OAAO,CAACO,GAAG,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IACjD;IACA,OAAOL,OAAO;EAChB;AACF,CAAC,CAAC;AAOF,OAAO,MAAMQ,OAAO,GAAGb,SAAS,CAAC;EAC/Bc,WAAW,EAAE,SAAS;EACtBZ,SAAS;EACTa,SAAS,EAAGC,OAAO,KAAM;IACvBC,SAAS,EAAED,OAAO,CAACE,QAAQ,CAAoD;MAC7EC,KAAK,EAAGC,IAAI,KAAM;QAChBC,GAAG,EAAE,QAAQ;QACbC,MAAM,EAAE,MAAM;QACdF,IAAI;QACJf,OAAO,EAAE;UACP,cAAc,EAAE;QAClB;MACF,CAAC;IACH,CAAC;EACH,CAAC;AACH,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEkB;AAAqB,CAAC,GAAGV,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}