{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nconst baseQuery = fetchBaseQuery({\n  baseUrl: 'http://localhost:5000',\n  prepareHeaders: (headers, _ref) => {\n    let {\n      getState\n    } = _ref;\n    const token = getState().auth.token;\n    if (token) {\n      headers.set('authorization', `Bearer ${token}`);\n    }\n    return headers;\n  }\n});\nexport const authApi = createApi({\n  reducerPath: 'authApi',\n  baseQuery,\n  endpoints: builder => ({\n    loginUser: builder.mutation < AuthResponse({\n      query: _ref2 => {\n        let {\n          email,\n          password\n        } = _ref2;\n        return {\n          url: '/login',\n          method: 'POST',\n          body: {\n            email,\n            password\n          }\n        };\n      }\n    })\n  })\n});\nexport const {\n  useLoginUserMutation\n} = authApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","baseQuery","baseUrl","prepareHeaders","headers","_ref","getState","token","auth","set","authApi","reducerPath","endpoints","builder","loginUser","mutation","AuthResponse","query","_ref2","email","password","url","method","body","useLoginUserMutation"],"sources":["C:/Users/Taha/Desktop/MERN-todo-case-project/frontend/src/api/authApi.ts"],"sourcesContent":["import {createApi, fetchBaseQuery} from '@reduxjs/toolkit/query/react';\r\nimport { RootState } from '../redux/store';\r\n\r\n\r\ninterface RootStateWithAuth extends RootState {\r\n    auth: {\r\n        token: string | null;\r\n    };\r\n}\r\n\r\n\r\n\r\n\r\nconst baseQuery = fetchBaseQuery({baseUrl: 'http://localhost:5000',\r\n    prepareHeaders: (headers, {getState}) => {\r\n        const token = (getState() as RootStateWithAuth).auth.token;\r\n        if (token) {\r\n            headers.set('authorization', `Bearer ${token}`);\r\n        }\r\n        return headers;\r\n    },\r\n});\r\n\r\n\r\nexport interface AuthResponse {\r\n    token: string;\r\n    message : string;\r\n}\r\n\r\n\r\n\r\n\r\nexport const authApi = createApi({\r\n    reducerPath: 'authApi',\r\n    baseQuery,\r\n    endpoints: (builder) => ({\r\n        loginUser : builder.mutation<AuthResponse({\r\n            query: ({email, password}: {email: string, password: string}) => ({\r\n                url: '/login',\r\n                method: 'POST',\r\n                body: {email, password},\r\n            }),\r\n        }),\r\n        \r\n\r\n    }),\r\n});\r\n\r\nexport const {useLoginUserMutation} = authApi;\r\n\r\n\r\n"],"mappings":"AAAA,SAAQA,SAAS,EAAEC,cAAc,QAAO,8BAA8B;AAatE,MAAMC,SAAS,GAAGD,cAAc,CAAC;EAACE,OAAO,EAAE,uBAAuB;EAC9DC,cAAc,EAAEA,CAACC,OAAO,EAAAC,IAAA,KAAiB;IAAA,IAAf;MAACC;IAAQ,CAAC,GAAAD,IAAA;IAChC,MAAME,KAAK,GAAID,QAAQ,CAAC,CAAC,CAAuBE,IAAI,CAACD,KAAK;IAC1D,IAAIA,KAAK,EAAE;MACPH,OAAO,CAACK,GAAG,CAAC,eAAe,EAAG,UAASF,KAAM,EAAC,CAAC;IACnD;IACA,OAAOH,OAAO;EAClB;AACJ,CAAC,CAAC;AAWF,OAAO,MAAMM,OAAO,GAAGX,SAAS,CAAC;EAC7BY,WAAW,EAAE,SAAS;EACtBV,SAAS;EACTW,SAAS,EAAGC,OAAO,KAAM;IACrBC,SAAS,EAAGD,OAAO,CAACE,QAAQ,GAACC,YAAY,CAAC;MACtCC,KAAK,EAAEC,KAAA;QAAA,IAAC;UAACC,KAAK;UAAEC;QAA2C,CAAC,GAAAF,KAAA;QAAA,OAAM;UAC9DG,GAAG,EAAE,QAAQ;UACbC,MAAM,EAAE,MAAM;UACdC,IAAI,EAAE;YAACJ,KAAK;YAAEC;UAAQ;QAC1B,CAAC;MAAA;IACL,CAAC;EAGL,CAAC;AACL,CAAC,CAAC;AAEF,OAAO,MAAM;EAACI;AAAoB,CAAC,GAAGd,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}